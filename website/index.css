@import "tailwindcss";
@plugin "@tailwindcss/typography";

@theme {
  --color-header: #1a1a2e;
  --color-header-active: #2a2a40;
}

/* Full-height app shell */
body {
  height: 100vh;
  display: flex;
  flex-direction: column;
}

#app {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
}

/* CodeMirror: hide gutters, ensure full height */
.editor .cm-gutters {
  display: none;
}

/* Shiki code blocks in raw/json mode */
.output.mode-raw pre.shiki,
.output.mode-json pre.shiki {
  margin: 0;
  padding: 16px;
  font-size: 13px;
  height: 100%;
  overflow: auto;
}

/* ANSI output: spans must be transparent bg */
.output.mode-ansi span {
  background: transparent;
}

/* Prose overrides for md4x-specific elements */
.prose x-equation {
  font-family: ui-monospace, monospace;
  color: #6639a6;
}

.prose x-wikilink {
  color: #0969da;
  border-bottom: 1px dashed #0969da;
}

.prose del {
  color: #656d76;
}

.prose details {
  margin: 0.75em 0;
}

.prose details summary {
  cursor: pointer;
  font-weight: 500;
}

/* GitHub-style alerts */
.prose blockquote.alert {
  position: relative;
  margin: 1rem 0;
  border: 1px solid #d0d7de;
  border-left-width: 4px;
  border-radius: 8px;
  padding: 0.9em 1em 0.8em;
  background: #f6f8fa;
}

.prose blockquote.alert::before {
  content: "Alert";
  display: block;
  margin-bottom: 0.5em;
  font-size: 12px;
  font-weight: 700;
  letter-spacing: 0.03em;
  text-transform: uppercase;
  color: #57606a;
}

.prose blockquote.alert.alert-note {
  border-left-color: #1f6feb;
  background: #eff6ff;
}
.prose blockquote.alert.alert-note::before {
  content: "Note";
  color: #1f6feb;
}

.prose blockquote.alert.alert-tip {
  border-left-color: #1a7f37;
  background: #eef9f0;
}
.prose blockquote.alert.alert-tip::before {
  content: "Tip";
  color: #1a7f37;
}

.prose blockquote.alert.alert-important {
  border-left-color: #8250df;
  background: #f5f0ff;
}
.prose blockquote.alert.alert-important::before {
  content: "Important";
  color: #8250df;
}

.prose blockquote.alert.alert-warning {
  border-left-color: #9a6700;
  background: #fff8c5;
}
.prose blockquote.alert.alert-warning::before {
  content: "Warning";
  color: #9a6700;
}

.prose blockquote.alert.alert-caution {
  border-left-color: #cf222e;
  background: #ffebe9;
}
.prose blockquote.alert.alert-caution::before {
  content: "Caution";
  color: #cf222e;
}

/* Component-like tags rendered from MDC syntax */
.prose alert,
.prose note,
.prose tip,
.prose important,
.prose warning,
.prose caution {
  display: block;
  margin: 1rem 0;
  border: 1px solid #d0d7de;
  border-left-width: 4px;
  border-radius: 8px;
  padding: 0.9em 1em 0.8em;
  background: #f6f8fa;
}

.prose alert[type="info"],
.prose note {
  border-left-color: #1f6feb;
  background: #eff6ff;
}
.prose alert[type="tip"],
.prose alert[type="success"],
.prose tip {
  border-left-color: #1a7f37;
  background: #eef9f0;
}
.prose alert[type="important"],
.prose important {
  border-left-color: #8250df;
  background: #f5f0ff;
}
.prose alert[type="warning"],
.prose warning {
  border-left-color: #9a6700;
  background: #fff8c5;
}
.prose alert[type="caution"],
.prose alert[type="danger"],
.prose caution {
  border-left-color: #cf222e;
  background: #ffebe9;
}

.prose card-group {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 12px;
  margin: 1rem 0;
}

.prose card {
  display: block;
  margin: 1rem 0;
  border: 1px solid #d0d7de;
  border-radius: 10px;
  padding: 1rem 1.1rem;
  background: #fff;
  box-shadow: 0 1px 3px rgb(0 0 0 / 6%);
  transition:
    border-color 0.15s,
    box-shadow 0.15s;
}

.prose card:hover {
  border-color: #b0b8c4;
  box-shadow: 0 2px 8px rgb(0 0 0 / 10%);
}

.prose card-group card {
  margin: 0;
}

/* Card header: icon + title */
.prose card[title]::before,
.prose card[icon]:not([title])::before {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  margin-bottom: 0.4rem;
}

.prose card[title]::before {
  content: attr(title);
  font-size: 1rem;
  font-weight: 600;
  color: #1f2937;
}

.prose card[icon]:not([title])::before {
  content: "";
  width: 1.5rem;
  height: 1.5rem;
}

/* Iconify icon via mask-image on ::before when icon contains ":" (prefix:name) */
.prose card[icon*=":"][title]::before {
  --icon-url: "";
  content: attr(title);
  display: flex;
  align-items: center;
  gap: 0.4rem;
  font-size: 1rem;
  font-weight: 600;
  color: #1f2937;
}

/* Emoji icons (no colon) show icon text + title */
.prose card[icon]:not([icon*=":"])[title]::before {
  content: attr(icon) "  " attr(title);
}

/* Emoji icon only (no title, no colon) */
.prose card[icon]:not([icon*=":"]):not([title])::before {
  content: attr(icon);
  font-size: 1.3rem;
}

/*
 * Iconify icon rendering for HTML-rendered cards.
 * Uses a hidden <i> generated via ::after with mask-image.
 * Since CSS cannot interpolate attr() into url(), we use a
 * small set of known icon selectors for the demo. For production,
 * use the Vue/React component path which renders <img> tags.
 */
.prose card[icon*=":"]::after {
  content: "";
  position: absolute;
  top: 1rem;
  left: 1.1rem;
  width: 1.4rem;
  height: 1.4rem;
  background: currentColor;
  mask-size: contain;
  mask-repeat: no-repeat;
  -webkit-mask-size: contain;
  -webkit-mask-repeat: no-repeat;
}

.prose card[icon*=":"] {
  position: relative;
  padding-left: 2.8rem;
}

.prose card[icon*=":"]::before {
  padding-left: 0;
}

/* Iconify icon mappings for demo */

.prose card[icon="mdi:folder"]::after {
  mask-image: url("https://api.iconify.design/mdi/folder.svg");
  -webkit-mask-image: url("https://api.iconify.design/mdi/folder.svg");
  color: #3b82f6;
}
.prose card[icon="mdi:folder-multiple"]::after {
  mask-image: url("https://api.iconify.design/mdi/folder-multiple.svg");
  -webkit-mask-image: url("https://api.iconify.design/mdi/folder-multiple.svg");
  color: #6b7280;
}
.prose card[icon="mdi:memory"]::after {
  mask-image: url("https://api.iconify.design/mdi/memory.svg");
  -webkit-mask-image: url("https://api.iconify.design/mdi/memory.svg");
  color: #22c55e;
}
.prose card[icon="mdi:cloud"]::after {
  mask-image: url("https://api.iconify.design/mdi/cloud.svg");
  -webkit-mask-image: url("https://api.iconify.design/mdi/cloud.svg");
  color: #8b5cf6;
}

/* Color accent on left border */
.prose card[color="blue"] {
  border-left: 3px solid #3b82f6;
}
.prose card[color="green"] {
  border-left: 3px solid #22c55e;
}
.prose card[color="purple"] {
  border-left: 3px solid #8b5cf6;
}
.prose card[color="red"] {
  border-left: 3px solid #ef4444;
}
.prose card[color="yellow"] {
  border-left: 3px solid #eab308;
}
.prose card[color="gray"] {
  border-left: 3px solid #9ca3af;
}

/* Tighten card paragraph spacing */
.prose card > p {
  margin: 0.25em 0;
  font-size: 0.9em;
  color: #4b5563;
}

/* Component-rendered card (Vue/React) */
.card-group {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 12px;
  margin: 1rem 0;
}

.card-component {
  border: 1px solid #d0d7de;
  border-radius: 10px;
  padding: 1rem 1.1rem;
  background: #fff;
  box-shadow: 0 1px 3px rgb(0 0 0 / 6%);
  transition:
    border-color 0.15s,
    box-shadow 0.15s;
}

.card-component:hover {
  border-color: #b0b8c4;
  box-shadow: 0 2px 8px rgb(0 0 0 / 10%);
}

a.card-link {
  text-decoration: none;
  color: inherit;
  display: block;
}

.card-header {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  margin-bottom: 0.4rem;
}

.card-icon {
  font-size: 1.3rem;
  line-height: 1;
  flex-shrink: 0;
}

img.card-icon {
  width: 1.4rem;
  height: 1.4rem;
  font-size: unset;
}

.card-title {
  font-size: 1rem;
  font-weight: 600;
  color: #1f2937;
}

.card-body {
  font-size: 0.9em;
  color: #4b5563;
}

.card-body > p {
  margin: 0.25em 0;
}

/* Card color accents */
.card-blue {
  border-left: 3px solid #3b82f6;
}
.card-green {
  border-left: 3px solid #22c55e;
}
.card-purple {
  border-left: 3px solid #8b5cf6;
}
.card-red {
  border-left: 3px solid #ef4444;
}
.card-yellow {
  border-left: 3px solid #eab308;
}
.card-gray {
  border-left: 3px solid #9ca3af;
}

.prose layout {
  display: grid;
  gap: 12px;
  margin: 1rem 0;
}
.prose layout[cols="2"] {
  grid-template-columns: repeat(2, minmax(0, 1fr));
}
.prose layout[cols="3"] {
  grid-template-columns: repeat(3, minmax(0, 1fr));
}
.prose layout[cols="4"] {
  grid-template-columns: repeat(4, minmax(0, 1fr));
}

.prose badge {
  display: inline-flex;
  align-items: center;
  border-radius: 999px;
  border: 1px solid #d0d7de;
  background: #f6f8fa;
  padding: 0.08rem 0.45rem;
  font-size: 0.78em;
  font-weight: 600;
  line-height: 1.4;
  vertical-align: baseline;
}

.prose tooltip {
  display: inline-flex;
  align-items: center;
  border-bottom: 1px dashed #6e7781;
  color: #24292f;
  cursor: help;
}

.prose icon-star::before {
  content: "★";
  color: #bf8700;
}
.prose icon-heart::before {
  content: "♥";
  color: #cf222e;
}

/* Mobile: wrap pre content */
@media (max-width: 768px) {
  [data-hidden] {
    display: none !important;
  }

  .output pre {
    white-space: pre-wrap;
    word-break: break-all;
  }

  .editor .cm-editor {
    max-width: 100% !important;
    width: 100% !important;
  }

  .editor .cm-content {
    font-size: 16px;
  }

  .prose layout[cols] {
    grid-template-columns: 1fr;
  }

  header {
    position: sticky;
    top: 0;
    z-index: 10;
  }
}
